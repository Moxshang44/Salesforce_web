<form class="product-form">
  <!-- Form Grid -->
  <div class="form-grid">
    <!-- Brand -->
    <div class="form-group">
      <label class="form-label">
        Brand
        <span class="required">*</span>
      </label>
      <select 
        class="form-select"
        [class.error]="errors['brand_id']"
        [(ngModel)]="formData.brand_id" 
        name="brand_id"
        (change)="onBrandChange()"
        [disabled]="isLoadingBrands"
        required
      >
        <option [ngValue]="null">
          @if (isLoadingBrands) {
            Loading brands...
          } @else {
            Select Brand
          }
        </option>
        @for (brand of brands; track brand.id) {
          <option [ngValue]="brand.id">{{ brand.name }}</option>
        }
      </select>
      @if (errors['brand_id']) {
        <span class="error-message">{{ errors['brand_id'] }}</span>
      }
    </div>

    <!-- Category -->
    <div class="form-group">
      <label class="form-label">
        Category
        <span class="required">*</span>
      </label>
      <select 
        class="form-select"
        [class.error]="errors['brand_category_id']"
        [(ngModel)]="formData.brand_category_id" 
        name="brand_category_id"
        (change)="onCategoryChange()"
        [disabled]="isLoadingCategories"
        required
      >
        <option [ngValue]="null">
          @if (isLoadingCategories) {
            Loading categories...
          } @else {
            Select Category
          }
        </option>
        @for (category of categories; track category.id) {
          <option [ngValue]="category.id">{{ category.name }}</option>
        }
      </select>
      @if (errors['brand_category_id']) {
        <span class="error-message">{{ errors['brand_category_id'] }}</span>
      }
    </div>

    <!-- Subcategory -->
    <div class="form-group">
      <label class="form-label">
        Subcategory <span class="optional">(Optional)</span>
      </label>
      <select 
        class="form-select" 
        [(ngModel)]="formData.brand_subcategory_id" 
        name="brand_subcategory_id"
      >
        <option [ngValue]="null">Select Subcategory</option>
        @for (subcategory of subcategories; track subcategory.id) {
          <option [ngValue]="subcategory.id">{{ subcategory.name }}</option>
        }
      </select>
    </div>

    <!-- Product Code -->
    <div class="form-group">
      <label class="form-label">
        Code
        <span class="required">*</span>
      </label>
      <input 
        type="text" 
        class="form-input"
        [class.error]="errors['code']"
        [(ngModel)]="formData.code" 
        name="code"
        placeholder="Enter product code"
        (input)="clearError('code')"
        required
      />
      @if (errors['code']) {
        <span class="error-message">{{ errors['code'] }}</span>
      }
    </div>

    <!-- Product Name (Full Width) -->
    <div class="form-group full-width">
      <label class="form-label">
        Product Name
        <span class="required">*</span>
      </label>
      <input 
        type="text" 
        class="form-input"
        [class.error]="errors['name']"
        [(ngModel)]="formData.name" 
        name="name"
        placeholder="Enter product name"
        (input)="clearError('name')"
        required
      />
      @if (errors['name']) {
        <span class="error-message">{{ errors['name'] }}</span>
      }
    </div>

    <!-- Description (Full Width) -->
    <div class="form-group full-width">
      <label class="form-label">
        Description <span class="optional">(Optional)</span>
      </label>
      <textarea 
        class="form-textarea"
        [(ngModel)]="formData.description" 
        name="description"
        placeholder="Enter product description"
        rows="3"
      ></textarea>
    </div>

    <!-- Barcode -->
    <div class="form-group">
      <label class="form-label">
        Barcode <span class="optional">(Optional)</span>
      </label>
      <input 
        type="text" 
        class="form-input"
        [(ngModel)]="formData.barcode" 
        name="barcode"
        placeholder="Enter barcode"
      />
    </div>

    <!-- HSN Code -->
    <div class="form-group">
      <label class="form-label">
        HSN Code <span class="optional">(Optional)</span>
      </label>
      <input 
        type="text" 
        class="form-input"
        [(ngModel)]="formData.hsn_code" 
        name="hsn_code"
        placeholder="Enter HSN code"
      />
    </div>

    <!-- GST Category -->
    <div class="form-group">
      <label class="form-label">
        GST Category
        <span class="required">*</span>
      </label>
      <select 
        class="form-select"
        [class.error]="errors['gst_category']"
        [(ngModel)]="formData.gst_category" 
        name="gst_category"
        (change)="clearError('gst_category')"
        required
      >
        <option value="">Select GST Category</option>
        @for (gstCat of gstCategories; track gstCat) {
          <option [value]="gstCat">{{ gstCat }}</option>
        }
      </select>
      @if (errors['gst_category']) {
        <span class="error-message">{{ errors['gst_category'] }}</span>
      }
    </div>

    <!-- GST Rate -->
    <div class="form-group">
      <label class="form-label">
        GST Rate (%)
        <span class="required">*</span>
      </label>
      <select 
        class="form-select"
        [class.error]="errors['gst_rate']"
        [(ngModel)]="formData.gst_rate" 
        name="gst_rate"
        (change)="clearError('gst_rate')"
        required
      >
        <option [ngValue]="null">Select GST Rate</option>
        @for (rate of gstRates; track rate) {
          <option [ngValue]="rate">{{ rate }}%</option>
        }
      </select>
      @if (errors['gst_rate']) {
        <span class="error-message">{{ errors['gst_rate'] }}</span>
      }
    </div>
  </div>

  <!-- Form Actions -->
  <div class="form-actions">
    <app-button 
      variant="outline" 
      type="button"
      (click)="onCancel()"
    >
      Cancel
    </app-button>
    <app-button 
      variant="primary" 
      type="button"
      (click)="onSave()"
    >
      Save & Next
    </app-button>
  </div>
</form>
