<div class="form-container">
  <form class="distributor-form">
    <!-- Row 1: Distributor Name, Contact Person Name -->
    <div class="form-row two-col">
      <div class="form-group">
        <label class="form-label">Distributor Name <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input"
          [class.error]="errors['name']"
          placeholder="e.g., Urban Agency"
          [(ngModel)]="formData.name"
          name="name"
          (input)="clearError('name')"
          maxlength="255"
          required
        >
        @if (errors['name']) {
          <span class="error-message">{{ errors['name'] }}</span>
        }
        <small class="form-hint">1-255 characters</small>
      </div>

      <div class="form-group">
        <label class="form-label">Contact Person Name <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input"
          [class.error]="errors['contact_person_name']"
          placeholder="e.g., Manoj Badayani"
          [(ngModel)]="formData.contact_person_name"
          name="contact_person_name"
          (input)="clearError('contact_person_name')"
          maxlength="255"
          required
        >
        @if (errors['contact_person_name']) {
          <span class="error-message">{{ errors['contact_person_name'] }}</span>
        }
        <small class="form-hint">1-255 characters</small>
      </div>
    </div>

    <!-- Row 2: Mobile Number, Email, License Number -->
    <div class="form-row three-col">
      <div class="form-group">
        <label class="form-label">Mobile Number <span class="required">*</span></label>
          <input 
          type="tel" 
          class="form-input"
          [class.error]="errors['mobile_number']"
          placeholder="e.g., 9876543210"
          [(ngModel)]="formData.mobile_number"
          name="mobile_number"
          (input)="clearError('mobile_number')"
          maxlength="15"
            required
          >
        @if (errors['mobile_number']) {
          <span class="error-message">{{ errors['mobile_number'] }}</span>
        }
        <small class="form-hint">10-15 characters</small>
      </div>

      <div class="form-group">
        <label class="form-label">
          Email <span class="optional-text">(Optional)</span>
        </label>
        <input 
          type="email" 
          class="form-input" 
          [class.error]="errors['email']"
          placeholder="abc@companyname.com"
          [(ngModel)]="formData.email"
          name="email"
          (input)="clearError('email')"
        >
        @if (errors['email']) {
          <span class="error-message">{{ errors['email'] }}</span>
        }
      </div>

      <div class="form-group">
        <label class="form-label">License Number <span class="optional-text">(Optional)</span></label>
        <input 
          type="text" 
          class="form-input" 
          [class.error]="errors['license_no']"
          placeholder="e.g., 9190093303"
          [(ngModel)]="formData.license_no"
          name="license_no"
          (input)="clearError('license_no')"
          maxlength="255"
        >
        @if (errors['license_no']) {
          <span class="error-message">{{ errors['license_no'] }}</span>
        }
        <small class="form-hint">Maximum 255 characters</small>
      </div>
    </div>

    <!-- Row 3: GST Number, PAN Card Number, Pin code -->
    <div class="form-row three-col">
      <div class="form-group">
        <label class="form-label">
          GST Number <span class="required">*</span>
        </label>
        <input 
          type="text" 
          class="form-input" 
          [class.error]="errors['gst_no']"
          placeholder="e.g., 27AABCU9603R1ZX"
          [(ngModel)]="formData.gst_no"
          name="gst_no"
          (input)="clearError('gst_no')"
          maxlength="15"
          required
        >
        @if (errors['gst_no']) {
          <span class="error-message">{{ errors['gst_no'] }}</span>
        }
        <small class="form-hint">Exactly 15 characters</small>
      </div>

      <div class="form-group">
        <label class="form-label">PAN Card Number <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input" 
          [class.error]="errors['pan_no']"
          placeholder="e.g., ABCDE1234F"
          [(ngModel)]="formData.pan_no"
          name="pan_no"
          (input)="clearError('pan_no')"
          maxlength="10"
          required
        >
        @if (errors['pan_no']) {
          <span class="error-message">{{ errors['pan_no'] }}</span>
        }
        <small class="form-hint">Exactly 10 characters</small>
      </div>

      <div class="form-group">
        <label class="form-label">PIN Code <span class="required">*</span></label>
        <input 
          type="text" 
          class="form-input" 
          [class.error]="errors['pin_code']"
          placeholder="e.g., 388126"
          [(ngModel)]="formData.pin_code"
          name="pin_code"
          (input)="clearError('pin_code')"
          maxlength="6"
          pattern="[0-9]*"
          required
        >
        @if (errors['pin_code']) {
          <span class="error-message">{{ errors['pin_code'] }}</span>
        }
        <small class="form-hint">Exactly 6 digits</small>
      </div>
    </div>

    <!-- Row 4: Full Address and Add Map Link -->
    <div class="form-row two-col">
      <div class="form-group">
        <label class="form-label">Address <span class="required">*</span></label>
        <textarea 
          class="form-textarea" 
          [class.error]="errors['address']"
          placeholder="Enter full address..."
          [(ngModel)]="formData.address"
          name="address"
          (input)="clearError('address')"
          rows="3"
          required
        ></textarea>
        @if (errors['address']) {
          <span class="error-message">{{ errors['address'] }}</span>
        }
      </div>

      <div class="form-group">
        <label class="form-label">Map Link <span class="optional-text">(Optional)</span></label>
        <input 
          type="url" 
          class="form-input" 
          placeholder="e.g., https://maps.app.goo.gl.../#m88977,sd=sbc"
          [(ngModel)]="formData.map_link"
          name="map_link"
        >
      </div>
    </div>

    <!-- Row 5: Upload Documents and Store Image -->
    <div class="form-row two-col">
      <div class="form-group">
        <div class="upload-section">
          <label class="section-label">Upload Documents</label>
          
          @if (documentPreviews.length === 0) {
            <div 
              class="file-upload-area"
              [class.dragging]="isDraggingDocs"
              (dragover)="onDocumentDragOver($event)"
              (dragleave)="onDocumentDragLeave($event)"
              (drop)="onDocumentDrop($event)"
            >
              <div class="upload-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="17 8 12 3 7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <line x1="12" y1="3" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <p class="upload-text">Drag & drop image here or click to browse</p>
              <p class="upload-hint">PNG, JPG (max up to 5MB)</p>
              <input 
                type="file" 
                accept="image/*,.pdf,.doc,.docx"
                multiple
                (change)="onDocumentFileSelected($event)"
                class="file-input"
                #docFileInput
              >
            </div>
          } @else {
            <div class="file-previews">
              @for (doc of documentPreviews; track $index; let i = $index) {
                <div class="file-preview-item">
                  <img [src]="doc.preview" alt="Document preview" class="preview-thumbnail">
                  <button 
                    type="button" 
                    class="remove-file-btn"
                    (click)="removeDocument(i)"
                  >
                    ×
                  </button>
                </div>
              }
              <div 
                class="add-more-btn"
                (click)="docFileInput.click()"
              >
                <span class="add-icon">+</span>
              </div>
              <input 
                type="file" 
                accept="image/*,.pdf,.doc,.docx"
                multiple
                (change)="onDocumentFileSelected($event)"
                class="file-input"
                #docFileInput
              >
            </div>
          }
        </div>
      </div>

      <div class="form-group">
        <div class="upload-section">
          <label class="section-label">Store Image</label>
          
          @if (imagePreviews.length === 0) {
            <div 
              class="file-upload-area"
              [class.dragging]="isDraggingImages"
              (dragover)="onImageDragOver($event)"
              (dragleave)="onImageDragLeave($event)"
              (drop)="onImageDrop($event)"
            >
              <div class="upload-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="17 8 12 3 7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <line x1="12" y1="3" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <p class="upload-text">Drag & drop image here or click to browse</p>
              <p class="upload-hint">PNG, JPG (max up to 5MB)</p>
              <input 
                type="file" 
                accept="image/*"
                multiple
                (change)="onImageFileSelected($event)"
                class="file-input"
                #imageFileInput
              >
            </div>
          } @else {
            <div class="file-previews">
              @for (image of imagePreviews; track $index; let i = $index) {
                <div class="file-preview-item">
                  <img [src]="image.preview" alt="Store image preview" class="preview-thumbnail">
                  <button 
                    type="button" 
                    class="remove-file-btn"
                    (click)="removeImage(i)"
                  >
                    ×
                  </button>
                </div>
              }
              <div 
                class="add-more-btn"
                (click)="imageFileInput.click()"
              >
                <span class="add-icon">+</span>
              </div>
              <input 
                type="file" 
                accept="image/*"
                multiple
                (change)="onImageFileSelected($event)"
                class="file-input"
                #imageFileInput
              >
            </div>
          }
        </div>
      </div>
    </div>
  </form>

  <!-- Action Buttons -->
  <div class="form-actions">
    <button 
      type="button" 
      class="btn-cancel"
      (click)="onCancel()"
    >
      Cancel
    </button>
    <button 
      type="button" 
      class="btn-save"
      (click)="onSaveAndNext()"
    >
      Save & Next
    </button>
  </div>
</div>
