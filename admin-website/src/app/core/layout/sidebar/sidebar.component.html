<aside class="sidebar" [class.collapsed]="isCollapsed" (mouseenter)="onSidebarHover()" (mouseleave)="onSidebarLeave()">
  <div class="sidebar-header">
    <img src="assets/images/company-logo.svg" alt="Company Logo" class="company-logo">
    <h1 class="company-name" *ngIf="!isCollapsed">{{ companyName }}</h1>
  </div>

  <nav class="sidebar-nav">
    @for (item of navItems; track item.label) {
      <div class="nav-item-wrapper">
        @if (item.subItems && item.subItems.length > 0) {
          <!-- Nav item with sub-menu -->
          <div 
            class="nav-item"
            [class.active]="isParentRouteActive(item) || item.isExpanded"
            [class.has-submenu]="true"
            (click)="toggleSubMenu(item)"
          >
            @if (item.iconImage) {
              <img [src]="item.iconImage" [alt]="item.label" class="nav-icon-img">
            }
            <span class="nav-label" *ngIf="!isCollapsed">{{ item.label }}</span>
            <span class="expand-icon" [class.expanded]="item.isExpanded" *ngIf="!isCollapsed">â–¸</span>
          </div>
          
          <!-- Sub-menu items -->
          @if (item.isExpanded && !isCollapsed) {
            <div class="sub-menu">
              @for (subItem of item.subItems; track subItem.route) {
                <a 
                  [routerLink]="subItem.route" 
                  routerLinkActive="active"
                  class="sub-nav-item"
                >
                  <span class="sub-nav-label">
                    <span class="arrow-left">>></span>
                    {{ subItem.label }}
                    <span class="arrow-right"><<</span>
                  </span>
                </a>
              }
            </div>
          }
        } @else {
          <!-- Regular nav item without sub-menu -->
          <a 
            [routerLink]="item.route" 
            routerLinkActive="active"
            class="nav-item"
          >
            @if (item.iconImage) {
              <img [src]="item.iconImage" [alt]="item.label" class="nav-icon-img">
            }
            <span class="nav-label" *ngIf="!isCollapsed">{{ item.label }}</span>
          </a>
        }
      </div>
    }
  </nav>
</aside>

